?Sweave
?testthat
?test_that
?testthat
setwd("~/Documents/Fall 2016/Stats 159/projects/proj3/code/scripts")
### Hypothesis Testing
#### This files contains code to run hypothesis tests to see if different levels of funding have a significant impact on the quality of education.
### Reading in the data
data_2006 <- read.csv("../../data/data_2006.csv")
scaled <- read.csv("../../data/scaled_data_2006.csv")
test <- read.csv("../../data/test_data.csv")
train <- read.csv("../../data/training_data.csv")
### Breaking the data into groups dependent on how much federal funding the school/students enrolled at the school received
#### Independent Variable :
#### Percent of undergraduates recieving federal financial aid
lo <- data_2006$INC_PCT_LO
m1 <- data_2006$INC_PCT_M1
m2 <- data_2006$INC_PCT_M2
h1 <- data_2006$INC_PCT_H1
pct_fin <- lo + m1 + m2 + h1
#### Visualizing data to get a better idea of how to split it into groups
nrow(data_2006)
length(pct_fin)
data_2006 <- cbind(data_2006, pct_fin)
png("../../images/percent_aided_students_hist.png")
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
dev.off()
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
png('../../images/percent_aided_students_hist.png')
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
dev.off()
?png
png(filename = '../../images/percent_aided_students_hist.png')
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
dev.off()
?png
library(grDevices)
png('../../images/percent_aided_students_hist.png')
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
dev.off()
dev.off()
dev.on()
png('../../images/hello.png')
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
dev.off()
hist(data_2006$pct_fin, breaks = 30, main = "Histogram of Financial Aid", xlab = "Percent of Students")
# Purpose of this file: Use PCA
# This helps with dimension reduction and reducing the risk of multicollinearity
#Begin Analysis on the training data
training_data <- read.csv("../../data/training_data.csv")
training_data <- training_data[,-1]
#unemployment rate, this is our first indicator of a successful college
set.seed (1000)
pca<- prcomp(training_data, center = TRUE, scale. = FALSE)
#note that the first component contains all the variance pca this means all the variance in the data is explained in the first principal component
plot(pca, type = "l")
summary(pca)
#All the data goes to the first component, no dimensionality reduction is useful
#for principal component regression
require(pls)
set.seed (1000)
pcr_model <- pcr(UNEMP_RATE~., data = training_data, scale = TRUE, validation = "CV")
ncomp_pcr <- which(pcr_model$validation$PRESS == min(pcr_model$validation$PRESS)) #selects components with best model
pcr_coef <- coef(pcr_model)
save(pcr_coef,pcr_model, file = "../../data/pcr_model.RData")
predplot(pcr_model)
coefplot(pcr_model)
#Adding Histograms to Images
png('../../images/CV_Errors_pcr.png')
validationplot(pcr_model, val.type = "MSEP")
dev.off()
intall ll
